{% verbatim %}
<span ng-class="{blockcontainer:!editMode,preview:previewMode}">
  <span ng-hide="editMode" class="blocklabel">{{block.name}}</span>
  <span class="blockelementwrapper" ng-repeat="child in block.children track by child.id" context-menu data-target="menu-{{$index}}">
    <div class="dropdown position-fixed" id="menu-{{ $index }}">
      <ul class="dropdown-menu" role="menu">
        <li>
          <a class="pointer" role="menuitem" tabindex="1"
          ng-click="moveUp($index)" ng-hide="$first">
          Move Up
        </a>
      </li>
      <li>
        <a class="pointer" role="menuitem" tabindex="1"  ng-hide="$last"
        ng-click="moveDown($index)">
        Move Down
      </a>
    </li>
    <li>
      <a class="pointer" role="menuitem" tabindex="1"
      ng-click="delete($index)">
      Remove
    </a>
  </li>
</ul></div>
<blockelement element="child" ng-model="block" ng-click="blockElementOptions($index)"></blockelement></span>
<div class="dropdown" ng-hide="editMode || previewMode">
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu{{id}}" data-toggle="dropdown">
    Add Widget
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu{{id}}">
    <li role="presentation"ng-repeat="type in widgetTypes"><a role="menuitem" tabindex="-1" ng-click="addWidget(type.id)">{{type.name}}</a></li>
  </ul>
</div>
</span>
{% endverbatim %}
